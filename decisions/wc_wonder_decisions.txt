decisions = {
	# old god retinue
	recruit_old_god_guard = {
		only_independent = yes
		is_high_prio = yes
		ai_check_interval = 12

		potential = {
			is_playable = yes
			NOT = { has_earmarked_regiments = old_god_guard }
			any_realm_wonder_upgrade = {
				OR = {
					has_wonder_upgrade = upgrade_old_god_cthun_1
					has_wonder_upgrade = upgrade_old_god_cthun_2
					has_wonder_upgrade = upgrade_old_god_nzoth_1
					has_wonder_upgrade = upgrade_old_god_nzoth_2
					has_wonder_upgrade = upgrade_old_god_yogg_saron_1
					has_wonder_upgrade = upgrade_old_god_yogg_saron_2
				}
				is_active = yes
			}
		}
		allow = {
		}
		effect = {
			random_realm_wonder_upgrade = {
				limit = {
					OR = {
						has_wonder_upgrade = upgrade_old_god_cthun_1
						has_wonder_upgrade = upgrade_old_god_cthun_2
						has_wonder_upgrade = upgrade_old_god_nzoth_1
						has_wonder_upgrade = upgrade_old_god_nzoth_2
						has_wonder_upgrade = upgrade_old_god_yogg_saron_1
						has_wonder_upgrade = upgrade_old_god_yogg_saron_2
					}
					is_active = yes
				}
				wonder = { save_event_target_as = the_wonder }
			}
			if = {
				limit = { event_target:the_wonder = { has_wonder_upgrade = upgrade_old_god_cthun_1 } }
				event_target:the_wonder = {
					show_scope_change = no
					location = {
						show_scope_change = no
						PREVPREV = {
							show_scope_change = no 
							spawn_unit = {
								owner = ROOT
								province = PREV
								home = PREV
								earmark = old_god_guard
								troops = {
									pikemen = { 480 480 }
									knights = { 240 240 }
									swarm = { 3600 3600 }
								}
								reinforces = yes
								attrition = 0.2
								maintenance_multiplier = 0
							}
						}
					}
				}
			}
			if = {
				limit = { event_target:the_wonder = { has_wonder_upgrade = upgrade_old_god_cthun_2 } }
				event_target:the_wonder = {
					show_scope_change = no
					location = {
						show_scope_change = no
						PREVPREV = {
							show_scope_change = no 
							spawn_unit = {
								owner = ROOT
								province = PREV
								home = PREV
								earmark = old_god_guard
								troops = {
									pikemen = { 720 720 }
									knights = { 360 360 }
									swarm = { 5400 5400 }
								}
								reinforces = yes
								attrition = 0.2
								maintenance_multiplier = 0
							}
						}
					}
				}
			}
			if = {
				limit = { event_target:the_wonder = { has_wonder_upgrade = upgrade_old_god_nzoth_1 } }
				event_target:the_wonder = {
					show_scope_change = no
					location = {
						show_scope_change = no
						PREVPREV = {
							show_scope_change = no 
							spawn_unit = {
								owner = ROOT
								province = PREV
								home = PREV
								earmark = old_god_guard
								troops = {
									light_infantry = { 1080 1080 }
									pikemen = { 720 720 }
									thralls = { 2400 2400 }
								}
								reinforces = yes
								attrition = 0.2
								maintenance_multiplier = 0
							}
						}
					}
				}
			}
			if = {
				limit = { event_target:the_wonder = { has_wonder_upgrade = upgrade_old_god_nzoth_2 } }
				event_target:the_wonder = {
					show_scope_change = no
					location = {
						show_scope_change = no
						PREVPREV = {
							show_scope_change = no 
							spawn_unit = {
								owner = ROOT
								province = PREV
								home = PREV
								earmark = old_god_guard
								troops = {
									light_infantry = { 2160 2160 }
									pikemen = { 1440 1440 }
									thralls = { 4800 4800 }
								}
								reinforces = yes
								attrition = 0.2
								maintenance_multiplier = 0
							}
						}
					}
				}
			}
						if = {
				limit = { event_target:the_wonder = { has_wonder_upgrade = upgrade_old_god_yogg_saron_1 } }
				event_target:the_wonder = {
					show_scope_change = no
					location = {
						show_scope_change = no
						PREVPREV = {
							show_scope_change = no 
							spawn_unit = {
								owner = ROOT
								province = PREV
								home = PREV
								earmark = old_god_guard
								troops = {
									light_infantry = { 1320 1320 }
									pikemen = { 1680 1680 }
								}
								reinforces = yes
								attrition = 0.2
								maintenance_multiplier = 0
							}
						}
					}
				}
			}
			if = {
				limit = { event_target:the_wonder = { has_wonder_upgrade = upgrade_old_god_yogg_saron_2 } }
				event_target:the_wonder = {
					show_scope_change = no
					location = {
						show_scope_change = no
						PREVPREV = {
							show_scope_change = no 
							spawn_unit = {
								owner = ROOT
								province = PREV
								home = PREV
								earmark = old_god_guard
								troops = {
									light_infantry = { 2640 2640 }
									pikemen = { 3360 3360 }
								}
								reinforces = yes
								attrition = 0.2
								maintenance_multiplier = 0
							}
						}
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = {
					any_war = {
						OR = {
							defender = { character = ROOT }
							attacker = { character = ROOT }
						}
					}
				}
			}
		}
	}
}