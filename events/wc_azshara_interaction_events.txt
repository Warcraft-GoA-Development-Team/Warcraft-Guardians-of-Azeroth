namespace = WCAIE

character_event = {
	id = WCAIE.1
	hide_window = yes

	is_triggered_only = yes

	trigger = {
	}
	
	immediate = {
		if = {
			limit = { check_variable = { which = "azshara_favor" value = 25 } }
			character_event = { id = WCAIE.30 }
		}
		else = {
			character_event = { id = WCAIE.2 }
		}
	}
}
character_event = {
	id = WCAIE.2
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.2
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
	}
	
	option = {
		name = EVTOPTA_WCAIE.2 #send tribute
		wealth = -500
		add_azshara_favor_effect = yes
		random_list = {
			10 = {
				set_character_flag = reward_azshara_favor
				
				modifier = {
					factor = 0
					has_character_modifier = azshara_favor
				}
			}
			10 = {
				set_character_flag = reward_azshara_handmaiden
				modifier = {
					factor = 0
					had_character_flag = {
						flag = azshara_handmaiden_cooldown
						years <= 5
					}
				}
			}
			10 = {
				set_character_flag = reward_azshara_giant_slaves
			}
			10 = {
				set_character_flag = reward_azshara_artifact_scimitar
			}
			10 = {
				set_character_flag = reward_azshara_artifact_trident
			}
			10 = {
				set_character_flag = reward_azshara_artifact_scepter
			}
			10 = {
				set_character_flag = reward_azshara_artifact_mace
			}
			10 = {
				set_character_flag = reward_azshara_artifact_statue
			}
			10 = {
				set_character_flag = reward_azshara_artifact_decree
			}
			10 = {
				set_character_flag = reward_azshara_artifact_bouquet
			}
			10 = {
				set_character_flag = reward_azshara_artifact_toy
			}
			10 = {
				set_character_flag = reward_azshara_artifact_murloc
			}
		}
		character_event = { id = WCAIE.5 }
	}
	option = {
		name = EVTOPTB_WCAIE.1 #nothing
		prestige = -50
	}
	# there is no nazjatar(yet)
	# option = {
		# name = EVTOPTB_WCAIE.1 #become tributary
		# trigger = {
			# independent = yes
			# tier = king
			# e_nazjatar = { has_holder = yes }
		# }
		# e_nazjatar = { holder = { make_tributary = { who = ROOT tributary_type = vassal_of_nazjatar } } }
		# ai_chance = {
			# factor = 0.6
			# modifier = {
				# factor = 0
				# NOT = { culture = naga }
			# }
		# }
	# }
}
character_event = {
	id = WCAIE.5
	hide_window = yes

	is_triggered_only = yes

	trigger = {
	}
	
	immediate = {
		if = {
			limit = { has_character_flag = reward_azshara_handmaiden }
			character_event = { id = WCAIE.20 }
			clr_character_flag = azshara_handmaiden_event
		}
		else = {
			character_event = { id = WCAIE.10 }
		}
	}
}
character_event = {
	id = WCAIE.10
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.10
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
	}
	
	option = {
		name = EVTOPTA_WCAIE.10
		prestige = 250
		if = {
			limit = { has_character_flag = reward_azshara_favor }
			add_character_modifier = { name = azshara_favor months = 60 }
			clr_character_flag = reward_azshara_favor
		}
		else_if = {
			limit = {
				has_character_flag = reward_azshara_giant_slaves
			}
			clr_character_flag = reward_azshara_giant_slaves
			spawn_unit = {
				province = PREV
				home = PREV
				owner = THIS

				troops = {
					pikemen = { 100 100 }
				}

				attrition = 1.0
				maintenance_multiplier = 0
			}
		}
		else_if = {
			limit = {
				has_character_flag = reward_azshara_artifact_scimitar
			}
			clr_character_flag = reward_azshara_artifact_scimitar
			add_artifact = naga_scimitar
		}
		else_if = {
			limit = {
				has_character_flag = reward_azshara_artifact_trident
			}
			clr_character_flag = reward_azshara_artifact_trident
			add_artifact = naga_trident
		}
		else_if = {
			limit = {
				has_character_flag = reward_azshara_artifact_scepter
			}
			clr_character_flag = reward_azshara_artifact_scepter
			add_artifact = naga_scepter
		}
		else_if = {
			limit = {
				has_character_flag = reward_azshara_artifact_mace
			}
			clr_character_flag = reward_azshara_artifact_mace
			add_artifact = naga_mace
		}
		else_if = {
			limit = {
				has_character_flag = reward_azshara_artifact_statue
			}
			clr_character_flag = reward_azshara_artifact_statue
			add_artifact = statue_of_azshara
		}
		else_if = {
			limit = {
				has_character_flag = reward_azshara_artifact_decree
			}
			clr_character_flag = reward_azshara_artifact_decree
			add_artifact = queens_decree
		}
		else_if = {
			limit = {
				has_character_flag = reward_azshara_artifact_bouquet
			}
			clr_character_flag = reward_azshara_artifact_bouquet
			add_artifact = eternal_bouquet
		}
		else_if = {
			limit = {
				has_character_flag = reward_azshara_artifact_toy
			}
			clr_character_flag = reward_azshara_artifact_toy
			add_artifact = naga_pool_toy
		}
		else_if = {
			limit = {
				has_character_flag = reward_azshara_artifact_murloc
			}
			clr_character_flag = reward_azshara_artifact_murloc
			add_artifact = taxidermied_murloc
		}
	}
}

character_event = {
	id = WCAIE.20
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.20
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
		create_character = {
			dynasty = actually_culture
			religion = old_gods_worship
			culture = naga
			female = yes
			age = 300
			attributes = {
				martial=5 diplomacy=5 stewardship=5 intrigue=5 learning=10
			}
			random_traits = yes
			trait = scholarly_theologian
			trait = creature_naga
			trait = fair
			trait = groomed
			trait = being_void
		}
		new_character = {
			random_list = {
				50 = {
					add_trait = class_mage_6
				}
				50 = {
					add_trait = class_mage_7
				}
			}
			# Removes wrong traits
			remove_negative_genetic_effect = yes
			remove_trait = chaste
			remove_trait = kind
			remove_trait = charitable
			remove_trait = humble
			remove_trait = honest
			remove_trait = zealous
			remove_trait = trusting
			remove_trait = craven
			add_character_modifier = { name = azshara_handmaiden duration = -1}
			save_event_target_as = target_handmaiden
			reverse_opinion = { modifier = opinion_loyal_servant who = event_target:target_handmaiden }
		}
	}

	option = {
		name = EVTOPTA_WCAIE.20
	}
	option = {
		name = EVTOPTB_WCAIE.20
		trigger = {
			can_marry = yes
			is_female = no
			trait = creature_naga
		}
		add_spouse = new_character
	}
	after = {
		prestige = 250
	}
}
#quest for the tidestone
character_event = {
	id = WCAIE.30
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.30
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
	}
	
	immediate = {
	}
	option = {
		name = EVTOPTA_WCAIE.30
		character_event = { id = WCAIE.31 days = 30 }
	}
}
#Preparations
character_event = {
	id = WCAIE.31
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.31
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
	}
	
	immediate = {
	}
	option = {
		name = EVTOPTA_WCAIE.31
		character_event = { id = WCAIE.32 days = 30 }
	}
}
#Start of travel
character_event = {
	id = WCAIE.32
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.32
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
	}
	
	immediate = {
	}
	option = {
		name = EVTOPTA_WCAIE.32
		character_event = { id = WCAIE.33 days = 30 }
		add_trait = 	travelling
	}
}
#Kraken!
character_event = {
	id = WCAIE.33
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.33
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
	}
	
	immediate = {
	}
	option = {
		name = EVTOPTA_WCAIE.33
		character_event = { id = WCAIE.34 days = 30 }
	}
}
#Maelstrom
character_event = {
	id = WCAIE.34
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.34
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
	}
	
	immediate = {
	}
	option = {
		name = EVTOPTA_WCAIE.34
		character_event = { id = WCAIE.35 days = 30 }
	}
}
#Caves
character_event = {
	id = WCAIE.35
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.35
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
	}
	
	immediate = {
	}
	option = {
		name = EVTOPTA_WCAIE.35
		character_event = { id = WCAIE.36 days = 30 }
	}
}
#Found makrura corpse
character_event = {
	id = WCAIE.36
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.36
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
	}
	
	immediate = {
	}
	option = {
		name = EVTOPTA_WCAIE.36
		character_event = { id = WCAIE.37 days = 30 }
	}
}
#Magic gates
character_event = {
	id = WCAIE.37
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.37
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
	}
	
	immediate = {
	}
	option = {
		name = EVTOPTA_WCAIE.37
		character_event = { id = WCAIE.38 days = 30 }
	}
}
#Makrura host
character_event = {
	id = WCAIE.38
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.38
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
	}
	
	immediate = {
	}
	option = {
		name = EVTOPTA_WCAIE.38
		character_event = { id = WCAIE.39 days = 30 }
	}
}
#Battle
character_event = {
	id = WCAIE.39
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.39
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
	}
	
	immediate = {
	}
	option = {
		name = EVTOPTA_WCAIE.39
		character_event = { id = WCAIE.40 days = 30 }
	}
}
#Duel of fates
character_event = {
	id = WCAIE.40
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.40
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
	}
	
	immediate = {
	}
	option = {
		name = EVTOPTA_WCAIE.40
		remove_trait = travelling
	}
	option = {
		name = EVTOPTB_WCAIE.40
		remove_trait = travelling
	}
}