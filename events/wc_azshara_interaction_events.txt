namespace = WCAIE

character_event = {
	id = WCAIE.1
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.1
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
	}
	
	option = {
		name = EVTOPTA_WCAIE.1 #send tribute
		wealth = -500
		add_azshara_favor_effect = yes
		random_list = {
			10 = {
				set_character_flag = reward_azshara_favor
				
				modifier = {
					factor = 0
					has_character_modifier = azshara_favor
				}
			}
			10 = {
				set_character_flag = reward_azshara_handmaiden
				modifier = {
					factor = 0
					had_character_flag = {
						flag = azshara_handmaiden_cooldown
						years <= 5
					}
				}
			}
			10 = {
				set_character_flag = reward_azshara_artifact_statue
			}
			10 = {
				set_character_flag = reward_azshara_artifact_scimitar
			}
			10 = {
				set_character_flag = reward_azshara_artifact_trident
			}
			10 = {
				set_character_flag = reward_azshara_artifact_scepter
			}
		}
		character_event = { id = WCAIE.5 }
	}
	option = {
		name = EVTOPTB_WCAIE.1 #nothing
		prestige = -50
	}
	# there is no nazjatar(yet)
	# option = {
		# name = EVTOPTB_WCAIE.1 #become tributary
		# trigger = {
			# independent = yes
			# tier = king
			# e_nazjatar = { has_holder = yes }
		# }
		# e_nazjatar = { holder = { make_tributary = { who = ROOT tributary_type = vassal_of_nazjatar } } }
		# ai_chance = {
			# factor = 0.6
			# modifier = {
				# factor = 0
				# NOT = { culture = naga }
			# }
		# }
	# }
}
character_event = {
	id = WCAIE.5
	hide_window = yes

	is_triggered_only = yes

	trigger = {
	}
	
	immediate = {
		if = {
			limit = { has_character_flag = reward_azshara_handmaiden }
			character_event = { id = WCAIE.20 }
			clr_character_flag = azshara_handmaiden_event
		}
		else = {
			character_event = { id = WCAIE.10 }
		}
	}
}
character_event = {
	id = WCAIE.10
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.10
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
	}
	
	option = {
		name = EVTOPTA_WCAIE.10
		prestige = 250
		if = {
			limit = { has_character_flag = reward_azshara_favor }
			add_character_modifier = { name = azshara_favor months = 60 }
			clr_character_flag = reward_azshara_favor
		}
		else_if = {
			limit = {
				has_character_flag = reward_azshara_artifact_statue
			}
			clr_character_flag = reward_azshara_artifact_statue
		}
		else_if = {
			limit = {
				has_character_flag = reward_azshara_artifact_scimitar
			}
			clr_character_flag = reward_azshara_artifact_scimitar
		}
		else_if = {
			limit = {
				has_character_flag = reward_azshara_artifact_trident
			}
			clr_character_flag = reward_azshara_artifact_trident
		}
		else_if = {
			limit = {
				has_character_flag = reward_azshara_artifact_scepter
			}
			clr_character_flag = reward_azshara_artifact_scepter
		}
	}
}

character_event = {
	id = WCAIE.20
	picture = GFX_evt_azshara
	desc = EVTDESC_WCAIE.20
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
		create_character = {
			dynasty = actually_culture
			religion = old_gods_worship
			culture = naga
			female = yes
			age = 300
			attributes = {
				martial=5 diplomacy=5 stewardship=5 intrigue=5 learning=10
			}
			random_traits = yes
			trait = scholarly_theologian
			trait = creature_naga
			trait = fair
			trait = groomed
			trait = being_void
		}
		new_character = {
			random_list = {
				50 = {
					add_trait = class_mage_6
				}
				50 = {
					add_trait = class_mage_7
				}
			}
			# Removes wrong traits
			remove_negative_genetic_effect = yes
			remove_trait = chaste
			remove_trait = kind
			remove_trait = charitable
			remove_trait = humble
			remove_trait = honest
			remove_trait = zealous
			remove_trait = trusting
			remove_trait = craven
			add_character_modifier = { name = azshara_handmaiden duration = -1}
			save_event_target_as = target_handmaiden
			reverse_opinion = { modifier = opinion_loyal_servant who = event_target:target_handmaiden }
		}
	}

	option = {
		name = EVTOPTA_WCAIE.20
	}
	option = {
		name = EVTOPTB_WCAIE.20
		trigger = {
			can_marry = yes
			is_female = no
			trait = creature_naga
		}
		add_spouse = new_character
	}
	after = {
		prestige = 250
	}
}